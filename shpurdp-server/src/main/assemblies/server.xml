<?xml version="1.0"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at
  
       http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<assembly>
  <id>dist</id>
  <formats>
    <format>dir</format>
    <format>tar.gz</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <!-- File sets. Syntax:
	  <fileSets>
	    <fileSet>
	      <useDefaultExcludes/>
	      <outputDirectory/>
	      <includes/>
	      <excludes/>
	      <fileMode/>
	      <directoryMode/>
	      <directory/>
	      <lineEnding/>
	      <filtered/>
	    </fileSet>
	  </fileSets>
  -->
  <fileSets>
    <fileSet>
      <directory>${shpurdp-web-dir}</directory>
      <outputDirectory>/usr/lib/shpurdp-server/web</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${project.basedir}/../shpurdp-common/src/main/python/shpurdp_commons</directory>
      <outputDirectory>${shpurdp_commons.install.dir}</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${resourceManagementSrcLocation}</directory>
      <outputDirectory>${resource_management.install.dir}</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${project.basedir}/../shpurdp-common/src/main/python/shpurdp_jinja2/shpurdp_jinja2</directory>
      <outputDirectory>${jinja.install.dir}</outputDirectory>
      <excludes>
      	<exclude>**/testsuite/**</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>${project.basedir}/../shpurdp-common/src/main/python/shpurdp_simplejson</directory>
      <outputDirectory>${simplejson.install.dir}</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${project.basedir}/../shpurdp-common/src/main/python/shpurdp_pbkdf2</directory>
      <outputDirectory>${pbkdf2.install.dir}</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${project.basedir}/../shpurdp-common/src/main/python/shpurdp_pyaes</directory>
      <outputDirectory>${pyaes.install.dir}</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>700</fileMode>
      <directory>src/main/resources/db</directory>
      <outputDirectory>/var/lib/shpurdp-server/keys/db</outputDirectory>
    </fileSet>
    <fileSet>
      <directoryMode>755</directoryMode>
      <directory>${empty.dir}</directory>
      <outputDirectory>/var/run/shpurdp-server</outputDirectory>
	  <excludes>
	    <exclude>*/**</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <directoryMode>755</directoryMode>
      <directory>${empty.dir}</directory>
      <outputDirectory>/var/run/shpurdp-server/bootstrap</outputDirectory>
	  <excludes>
	    <exclude>*/**</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <directoryMode>755</directoryMode>
      <directory>${empty.dir}</directory>
      <outputDirectory>/var/run/shpurdp-server/stack-recommendations</outputDirectory>
	  <excludes>
	    <exclude>*/**</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <directoryMode>755</directoryMode>
      <directory>${empty.dir}</directory>
      <outputDirectory>/var/log/shpurdp-server</outputDirectory>
	  <excludes>
	    <exclude>*/**</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <directoryMode>777</directoryMode>
      <directory>${empty.dir}</directory>
      <outputDirectory>/var/lib/shpurdp-server/data/tmp</outputDirectory>
	  <excludes>
	    <exclude>*/**</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <directoryMode>700</directoryMode>
      <directory>${empty.dir}</directory>
      <outputDirectory>/var/lib/shpurdp-server/data/cache</outputDirectory>
	  <excludes>
	    <exclude>*/**</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <directoryMode>700</directoryMode>
      <directory>${empty.dir}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/upgrade</outputDirectory>
	  <excludes>
	    <exclude>*/**</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>src/main/resources/scripts</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/scripts</outputDirectory>
      <excludes>
        <exclude>post-user-creation-hook.sh</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <fileMode>644</fileMode>
      <directory>${shpurdp-admin-dir}/target</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/views</outputDirectory>
      <includes>
        <include>*.jar</include>
      </includes>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>src/main/resources/upgrade/ddl</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/upgrade/ddl</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>src/main/resources/upgrade/dml</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/upgrade/dml</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>${commonServicesSrcLocation}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/common-services</outputDirectory>
      <excludes>
	    <exclude>/STORM/0.9.1/package/files/wordCount.jar</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <fileMode>644</fileMode>
      <directory>${commonServicesSrcLocation}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/common-services</outputDirectory>
      <includes>
	    <include>/STORM/0.9.1/package/files/wordCount.jar</include>
	  </includes>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>${stackHooksLocation}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/stack-hooks</outputDirectory>
      <excludes>
	    <exclude>/before-START/files/fast-hdfs-resource.jar</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <fileMode>644</fileMode>
      <directory>${stackHooksLocation}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/stack-hooks</outputDirectory>
      <includes>
	    <include>/before-START/files/fast-hdfs-resource.jar</include>
	  </includes>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>src/main/resources/upgrade/catalog</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/upgrade/catalog</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>${stacksSrcLocation}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/stacks/${stack.distribution}</outputDirectory>
      <excludes>
	    <exclude>/2.1.GlusterFS/services/STORM/package/files/wordCount.jar</exclude>
	  </excludes>
    </fileSet>
    <fileSet>
      <fileMode>644</fileMode>
      <directory>${stacksSrcLocation}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/stacks/${stack.distribution}</outputDirectory>
      <includes>
	    <include>/2.1.GlusterFS/services/STORM/package/files/wordCount.jar</include>
	  </includes>
    </fileSet>
    <fileSet>
      <directoryMode>700</directoryMode>
      <directory>src/main/resources/mpacks-v2</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/mpacks-v2</outputDirectory>
      <excludes>
        <exclude>*/**</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>src/main/python/shpurdp_server</directory>
      <outputDirectory>/usr/lib/shpurdp-server/lib/shpurdp_server</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>src/main/resources/custom_action_definitions</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/custom_action_definitions</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>${customActionsRoot}</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/custom_actions</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>src/main/resources/host_scripts</directory>
      <outputDirectory>/var/lib/shpurdp-server/resources/host_scripts</outputDirectory>
    </fileSet>
    <fileSet>
      <fileMode>755</fileMode>
      <directory>etc/init</directory>
      <outputDirectory>/etc/init</outputDirectory>
    </fileSet>
  </fileSets>
  <!-- Single files. Syntax:
	  <files>
	    <file>
	      <source/>
	      <outputDirectory/>
	      <destName/>
	      <fileMode/>
	      <lineEnding/>
	      <filtered/>
	    </file>
	  </files>
  -->
  <files>
    <file>
      <fileMode>644</fileMode>
      <source>${project.build.directory}/${project.artifactId}-${project.version}.jar</source>
      <outputDirectory>/usr/lib/shpurdp-server</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/python/shpurdp-server.py</source>
      <outputDirectory>/usr/sbin</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/python/shpurdp_server_main.py</source>
      <outputDirectory>/usr/sbin</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>${basedir}/target/shpurdp-server</source>
      <outputDirectory>/etc/init.d</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>${shpurdpProperties}</source>
      <outputDirectory>/etc/shpurdp-server/conf</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>conf/unix/log4j.properties</source>
      <outputDirectory>/etc/shpurdp-server/conf</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>conf/unix/metrics.properties</source>
      <outputDirectory>/etc/shpurdp-server/conf</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>conf/unix/krb5JAASLogin.conf</source>
      <outputDirectory>/etc/shpurdp-server/conf</outputDirectory>
    </file>
    <file>
      <fileMode>700</fileMode>
      <source>conf/unix/shpurdp-env.sh</source>
      <outputDirectory>/var/lib/shpurdp-server/</outputDirectory>
    </file>
    <file>
      <fileMode>700</fileMode>
      <source>conf/unix/shpurdp-sudo.sh</source>
      <outputDirectory>/var/lib/shpurdp-server/</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>conf/unix/create-python-wrap.sh</source>
      <outputDirectory>/var/lib/shpurdp-server/</outputDirectory>
    </file>
    <file>
      <fileMode>700</fileMode>
      <source>conf/unix/install-helper.sh</source>
      <outputDirectory>/var/lib/shpurdp-server/</outputDirectory>
    </file>
    <file>
      <fileMode>700</fileMode>
      <source>conf/unix/ca.config</source>
      <outputDirectory>/var/lib/shpurdp-server/keys</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-Postgres-CREATE.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/Shpurdp-DDL-Postgres-DROP.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-Postgres-EMBEDDED-CREATE.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/Shpurdp-DDL-Postgres-EMBEDDED-DROP.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-Oracle-CREATE.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-MySQL-CREATE.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/Shpurdp-DDL-Oracle-DROP.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/Shpurdp-DDL-MySQL-DROP.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-AzureDB-CREATE.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-SQLServer-CREATE.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-SQLServer-CREATELOCAL.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/Shpurdp-DDL-SQLServer-DROP.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>target/classes/Shpurdp-DDL-SQLAnywhere-CREATE.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/Shpurdp-DDL-SQLAnywhere-DROP.sql</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>644</fileMode>
      <source>${project.build.directory}/DBConnectionVerification.jar</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>644</fileMode>
      <source>${project.build.directory}/CredentialUtil.jar</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/APACHE-SHPURDP-MIB.txt</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/kerberos.json</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/widgets.json</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/stacks/stack_advisor.py</source>
      <outputDirectory>/var/lib/shpurdp-server/resources/stacks</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/stacks/service_advisor.py</source>
      <outputDirectory>/var/lib/shpurdp-server/resources/stacks</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/stacks/shpurdp_configuration.py</source>
      <outputDirectory>/var/lib/shpurdp-server/resources/stacks</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/python/bootstrap.py</source>
      <outputDirectory>/usr/lib/shpurdp-server/lib/shpurdp_server</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/python/setupAgent.py</source>
      <outputDirectory>/usr/lib/shpurdp-server/lib/shpurdp_server</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/python/os_check_type.py</source>
      <outputDirectory>/usr/lib/shpurdp-server/lib/shpurdp_server</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>${basedir}/target/version</source>
      <outputDirectory>/var/lib/shpurdp-server/resources</outputDirectory>
    </file>
    <file>
      <fileMode>755</fileMode>
      <source>src/main/resources/scripts/post-user-creation-hook.sh</source>
      <outputDirectory>/var/lib/shpurdp-server/resources/scripts</outputDirectory>
    </file>
  </files>    
  <dependencySets>
    <dependencySet>
      <fileMode>644</fileMode>
      <outputDirectory>/usr/lib/shpurdp-server</outputDirectory>
      <unpack>false</unpack>
      <scope>runtime</scope>
    </dependencySet>
  </dependencySets>
</assembly>
